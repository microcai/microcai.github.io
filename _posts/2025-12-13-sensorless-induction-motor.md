---
layout: post
title: 无传感器感应电机驱动
tags: [异步电机, 无感]
---

# 前言

我很喜欢异步电机。当然特指三相异步电机。如果是单相的，那是一点喜欢不起来。

三相异步电机，如果需要精确的控制，总是需要转速传感器。有了转速传感器，就可以配合滑差率进行闭环控制。

但是，传感器并不总是有的。很多时候，传感器安装不便，有的情况下，也是为了懒惰：没传感器的情况下只需要接3根线。

没有传感器，如何获得转速呢？

在无刷电机里，转子有磁场。有转速就可以发电。于是可以用反电动势大法获得转子的位置——连实时位置都有了，转速更有了。

但是，在异步电机里，如何在无传感器的情况下获取转子速度呢？

# 电流幅值和瞬时值

异步电机说到底还是交流电驱动的。交流电过去后，就可以测量出电流的幅值和相对电压的相位差了。

电流相对电压的相位差，也就是无功功率的由来。

我们通过测量手段测量出来的，实际上是三条相线的相电流。Ia Ib Ic。在古代电机控制算法里，需要经过一个变换将他变成 Iq 和 Id。但是，这一个步骤，对无刷电机来说，首先需要知道电机的转子电角度，对异步电机来说，首先需要知道转差率。

不如换一种变换方式，首先将他转换为通常意义上的 “电流”，也就是不带矢量的电流。这个电流，就是电功率 P=IU 里的那个电流。三相电虽然电流和电压的大小时刻在变化，但是它的功率是保持恒定的。因此他实际上有一个固定 I 和一个固定的 U. 这个固定的 I 和固定的 U 就是三相交流电的有效电压和有效电流。 这个等效电压，可以通过 $占空比*母线电压 / \sqrt{2}$计算出来，而这个等效电流，如何快速的通过 Ia Ib Ic 计算出来呢？

答案是，通过矢量合成。由于 Ia Ib Ic 是在空间上错开120度的矢量，经过合成，就知道了这个合成矢量的模。

于是
$
I = \sqrt{2/3*(Ia^2 + Ib^2 + Ic^2 ) }
$

这样计算获得的就是每相电的有效值。

因此，在任意时刻，程序手头能立刻获得的实时数据有：

    1：输出电压幅值
    2：输出频率
    3：相电流有效值

而此时要求得的是，滑差率，从而确定下一个周期的 输出频率。

凭借这4个参数，能否求得滑差率呢？

答案是，不能。

因此，还需要添加额外的参数：也就是所谓的电机参数。

这个额外的电机参数是：

    1：定子电阻
    2：鼠笼绕组的等效电阻

有了这额外的2个参数，能否计算出滑差率呢？

那么，我们来看，滑差率如何影响电流的幅值和相位。

首先我们知道，定子输入的功率P一部分被定子的电阻消耗，而另一部分不会凭空消失，肯定是转移给了转子。

因此，转子消耗的功率

$
Protor = Ptotal - Psator
$

转子消耗的功率，一部分变成的机械能输出，而另一部分，则变成了转子的励磁电流，经过转子的电阻消耗掉了。

这个比值，恰好等于转差率！

也就是

$
转差率= （Irotor^2*Rrotor） \div (Ptotal-Pstator)
$

而转子电流的大小，恰好等于定子电流*定子匝数。这里，定子电流就是上面计算出来的相电流有效值。
于是，我们把转子的电阻和电流都换算到初级侧，就可以去掉定子匝数，只需要转子的等效电阻 Rrotor'

$
转差率= （I^2*Rrotor'） \div (Ptotal-Pstator)
$

这里，转子的等效电阻这个东西，是可以通过 “参数辨识” 功能获取的，不需要用户提前编码到控制器里。

# 参数辨识过程

但是，电机的转子的等效电阻，定子电阻，这个对变频器来说极其重要的参数，是不会标在电机铭牌上的。

于是，变频器必须自己获得这个参数。

要获得这个参数，需要变频器进行2个测试：直流测试和堵转测试。

分别获取 直流测试电流和堵转电流。以及测试的时候分别测得的功率。

那么，

$
定子电阻 = 直流测试功率/直流测试电流
$

然后，转子等效电阻有一个工程近似计算公式

$
转子等效电阻=堵转功率/（堵转电流^2*3） - 定子电阻
$

于是，这2个对后续计算极其重要的参数就这么简单的 获得了。

