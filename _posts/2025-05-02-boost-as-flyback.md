---
layout: post
title: 设计一个 3V - 100V 超宽压输入，15V 输出的电源
tags: [Boost, PCB, FlyBack, DCDC]
---

# DCDC 的困境

在设计一个电机控制器的时候，遇到了一个多电压的问题。

首先是单片机，需要 3.3V 供电。然后是传感器，需要 5V 供电，最后是栅极驱动，需要 15V （其实是 10-18V 都行 ）供电。

如果使用降压 DCDC 的方式获得这些电压，意味着这个电机控制器，最低需要 15V 供电。

这样，就不能适应广泛存在的电压标准：12V。因此，使用降压的方式获得这些电压，通常意味着设计输入电压为 24V 和以上。

如果是 12V供电，则需要升压到 15V。如果想实现同时支持 12V 和  24V 供电，做法有两个。

    - 使用 升降压 方案。需要4个MOS管，成本略高。

    - 输入先降压到 5V, 然后升压到 15V。

降压后升压或者升降压的方案，意味着板子可以支持 6V 12V 24V 三个电压等级的应用。


但是，如果是单锂电池供电呢？则需要支持到 3V 输入。如果先降压到 3V, 则3V 到 15V 的升压倍数较大。Boost 变换会较为吃力。
可以先选择升压。3V 先升压到 16V。 然后 从 16V 降压到哦 15V 和 5V。如果输入超过 16V ， 则前级的 Boost 芯片停止工作，直通到后面的 降压 15V 的芯片。


这意味着，不管是 3V 升压16V的芯片，还是 16V 降压 15V 的芯片，都要承受输入的最大电压。


如果设计为要求 3V - 100V 输入呢？又当如何？


# 反激方案

通常来说，反激是用于 AC220V 输入的方案。但是，实际上反激最低也可以支持 3V 的低压。

反激的方案有个优势，就是输入的耐压是由 MOS 管决定的，和芯片自身无关。因为反激的芯片是双供电的。首先是用一个启动电阻供电，等第一个 pwm波发出去后，就由辅助绕组供电了。芯片本身一直在低压环境下工作，只有 MOS 管需要承受百伏高压。反激的另一个优势是另一路 5V 电压可以从变压器直接获得，不需要再经过一次 DCDC 变压。

当然，现成的反激芯片，其实都不支持 3V 这么低的电压下启动。最少也要 10V 的电压下启动。

然而，反激其实就是 Boost 升压。因此，任意 Boost 升压 DCDC 芯片，其实都支持当成反激控制器用。

而且，反激比 Boost 的一大优势是，反激能降压。而 Boost 只能升压。这意味着，如果使用反激的方式，输入 不管大于 15V 还是小于 15V ， 都可以从容的获得 15V 的输出。

而且反激获得的输出还是隔离的。虽然在低压电机控制器上，并不太需要这个隔离能力就是了。

为了支持从 3V 的低压下启动，我需要寻找2满足2个要求的 Boost 升压芯片：

    1. 最低支持到 3V 输入。
    2. 使用外置 MOS 管

如果 100V 是刚需，则第二个要求是必须的。如果只需要 3V - 30V 这样的常规低压，则 2 是非必须的。

如果是使用内置 MOS 的 boost 升压芯片，要记得，反激是有 反射电压 的。因此如果要支持 30V 输入， 则需要使用  60V 的 boost 芯片。
选外置 mos 管也是一样的道理。要支持到 100V 输入，需要选择 150V - 200V 耐压的 MOS，当然升压控制器自身的输入耐压就是无关紧要的了。



![](/images/SCH_3-75V输出15V_2025-05-02.png)



变压器有4个次级绕组。其中一个是给控制器供电的辅助绕组。剩下3个，分别是5V 输出，防浪涌MOS专用绕组，和 15V 输出。

防浪涌本来使用一个继电器即可，但是继电器有静态工作损耗。所以改成了 NMOS. 这个 NMOS 需要浮地驱动，因此需要隔离电源。反正反激的隔离电源获得成本低。

5V 输出实际上是 6V 输出。需要接 LDO 降压为  5V 和 3.3V 使用。因为 5V 和 3.3V 都是对电压纹波比较敏感的元件。因此后面再跟 LDO 降压并进一步降低纹波。




