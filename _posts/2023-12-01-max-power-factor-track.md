---
layout: post
title: 制作变频器-第四部分
tags: [变频器, 功率因素]
---

# 感应电机的开环控制

在没有使用变频器的时候，感应电机无法调速。交流电改变频率虽然困难，但是改变电压很容易。
因此也有通过自耦变压器调压后驱动感应电机的方法。

但是仅仅是降低了电压，扭矩降低导致转差变大。转差变大使得转子发热增加。不利于电机的长期稳定运行。

所以有了 恒压频比的开环变频调速器。注意，这个词的分词应该是  恒 压频比。

意思是以固定的 频率和电压的比值进行调速。比如一个额定 220v/50hz 的电机，当试图降一半转速运行的时候，可以设定逆变器输出 110v/25hz 给电机。

恒压频比是一种开环控制。控制器只是盲目的输出一个设定的电压和频率。但是并不能让电机工作在最佳的特性点上。


![异步电机的机械特性](/images/im_torque_characteristics.png)

图中，恒坐标是转差率，纵坐标为扭矩。B 点就是电机的最佳工作点。但是电机遇到扰动的时候，很容易进入 B-A 区间。
因此，实际会尽量让电机工作在 B-C 区间，并靠近 B 点。

Tm 的值表示电机的最大扭矩，电机的最大扭矩正比于电压的平方。

因此，可以看出，使用恒压频比控制，并不能很好的让电机工作在最佳状态。

所以就得出了在电动汽车领域更常见的做法：

# 转差率闭环控制

既然电机的最大扭矩取决于电压，那只要知道了电机的转速，控制逆变器输出的频率，让电机始终工作在最大扭矩上。意味着在相同的转速和扭矩输出下（即相同的机械功率输出下）。闭环控制的逆变器始终会比恒压频比的控制器输出更低的电压。于是使得电机吸收的电功率跟小，也就是机械效率更高。

怎么知道电机的转速呢？

常规做法，是使用转速传感器。有了转速传感器，就可以进行基于转差率的闭环控制。知道电机转速后，可以立马获得当前输出频率。输出电压设定为 min(恒压频比计算出来的频率, 用户设定的扭矩电压)

也就是随着转速的提升逐步提高电压，并在达到最大电压后停止电压攀升。如果电机扭矩还有富裕（负载较低）则电机电压不再提升的情况下，频率会继续提升，也就是进入弱磁控制状态。可以榨干电机的机械潜力。

转差率闭环控制下，异步电机的特性就更贴近于直流电机了。通过调节电压可以轻松的控制扭矩，而频率则通过闭环控制自动跟踪。控制器输出电流频率，正比于电机转速，和同步电机异曲同工之妙。只是不需要控制电流相位。


# 无转速传感器无参数设定的闭环控制

转速传感器不仅仅提高了整个系统的成本，而且降低了电机的可靠性。因为异步电机工作环境通常较为恶劣。也正是因为恶劣环境下必须选择结构较为简单的异步电机。

所以，如果能使脱离转速传感器，但是依旧使用闭环控制，则能同时兼具开环控制的低成本优势和闭环控制的高效率优势。

前人提出了不少方式，但是这些方式有一个共同特点：需要异步电机的各项参数。 如绕组电感，绕组电阻，额定转差率。

事实上，额定转差率是一个更为难获取的数值。其实使用转速传感器进行闭环控制的时候，也需要这个参数。这也是为何闭环控制器，通常和电机绑定。而市面上普遍单独售卖的变频器，都是开环控制。

因此，如何让变频器可以同直流电机控制器一样，无需设定电机参数，就能自动获得和直流电机一样（或者接近）的控制特性呢？

于是，经过我长期的思考，我得出了一个解决方案：

## 最大功率因素点跟踪

交流电机在运行过程中，不同的运转状态下，会产生不同的功率因素。

例如，电机堵转运行的时候，绕组的表现为纯电感。于是功率因素接近 0, ，但是电机要从电网汲取超大的电流。这些超大的电流最后都通过电线的电阻发热损耗掉了。

电机在空载运行的时候，绕组表现依旧为纯电感。功率因素依旧接近 0 。 但是因为此时转子转速接近同步转速，因此电机产生的反电动势抵消了外部的驱动电压。空载运行时，电机反电动势会极为接近驱动电压。因此电流处于最小值。绕组实际电压为 驱动电压-反电动势电压。然后电流为此时电压下的电感电流。

而电机正常的处于额定负载的情况下，会产生最大的功率因素。负载低于和高于额定负载，都会使电机的功率因素下降。

因此，只要寻找到让电机功率因素最大的 频率/电压 组合，就可以在不知晓电机各项参数的情况下，获得接近直流电机般的转矩特性。


而最大功率因素点跟踪，其思路就来自 太阳能控制器的最大功率点跟踪。

具体做法是。使用 恒压频比，设定一个初始的频率。而算法的输出，为对初始频率的修正数。


算法的观测器，为 功率因素。功率因素的获取方式很简单，就是通过电流采样，获取三相各自的电流值。将电流值与此时逆变器的输出电压比较，就可以获得电流相对电压的滞后角。通过滞后角，就得到了功率因素。

此时算法会尝试 减少或者增加频率，然后观察功率因素的变化方向。
如果功率因素的变化方向，和频率的修正数同向，则电机目前工作在轻载模式。需要继续增加频率。

如果功率因素的变化方向，和频率的修正数逆向，则电机工作在重载模式。需要降低频率。

这样经过双向的尝试，控制器很快就能稳定在使功率因素最大的频率上。

