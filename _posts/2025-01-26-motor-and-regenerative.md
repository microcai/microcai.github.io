---
layout: post
title: 电机控制的几个思索
tags: [bldc, motor]
---

# 关于能量转化上的思考

电动机，供电即转。转即发电。

无负载的情况下，电机无功率输出，（理论上）无功率消耗。

通电即转，和无功率消耗的矛盾是如何化解的呢？那就是“反电动势”。
在无负载的情况下，电机的转速会达到反电动势等于输入电压。

此时输入电压完全和反电动势抵消。于是绕组实际上无电流通过。因此不产生扭矩。故 电压\*0电流 = 0 功率。

只要有负载，转速就会低于空载转速，于是反电动势低于输入电压。绕组产生电流，建立磁场，电机产生扭矩输出。

因此电机消耗的电流，大致相当于 （输入电压 - 反电动势）/绕组阻抗。

> 注：绕组阻抗是由电阻和电抗叠加而来的。因此超导做的绕组依然不会有无穷大电流。

# 关于空挡滑行再启动

在控制策略上，空挡滑行有2种控制策略

- 切断供电回路

    控制器停止工作并切断回路（6个MOS管全部关闭）。切断电路后，电机空挡旋转产生的反电动势没有回路。因此不产生电流。电机进入空挡滑行状态。

- 控制器输出电压跟随反电动势，确保绕组无电流

    此模式下，控制器继续积极工作。但是始终保证控制器输出的电压等于电机反电动势。确保相电流为0。

第二种模式下，电机空挡滑行的时候，控制器仍然在积极工作，因此存在不大不小的损耗。

从节能减排的角度而言，应该优先选择第一种策略。

那么第二种策略是为何产生的呢？

答案就是在空挡滑行状态再加速（松油门滑行后，再踩油门加速）的情况下。二者会产生不同的响应特点。


### 切断回路模式的再加速工作特点

由于控制器停止工作，因此控制器输出电压为 0。
因此，再加速的时候，控制器输出电压就需要“重新建立”。控制器的输出电压会经历一次从 0 到超过反电动势电压的一个“攀升”的过程。值得一提的是，在控制器输出0电压的时候，因为6管全关，因此起到了切断电路的效果，因此只有控制器 开始工作，电压输出开始不为0的时候，电路才接通。

这个过程虽然很短暂（一般而言是几十个毫秒），但是在攀升的过程中，存在短暂的控制器输出电压低于电机反电动势的时间。这个时间电机就会输出负扭矩。如果这个负扭矩较大，就会在体感上形成一个类似燃油车挂档不合适导致的“顿挫” —— 松离合器的时候，发动机被车速强行带上更高转速，从而导致一段时间内发动机输出负扭矩。

故为了消除这个顿挫，才有了控制器持续工作的空挡滑行模式。

### 相电流闭环控制为0的再加速特点

由于使用了闭环控制。因此空挡后再加速的时候，只要将闭环控制的电流目标调节为 > 0 即可立即输出扭矩。
不会经历一个短暂的 “顿挫” 过程。


# 强制动能回收

但是，在空挡滑行的时候，还让控制器持续工作，意味着不能实现6个 mos管全关的节能模式。

舒适了，但是并不节能。

如果强制动能回收。则可以强迫驾驶员用自己的脚避免进入 “松油门滑行” 状态。等于完全取消了这个工况。

因此即避免了关控制器模式的顿挫，也避免了闭环0电流滑行的损耗。

与此同时，还不需要设计 机械刹车和动能回收的协调工作。

三赢。


