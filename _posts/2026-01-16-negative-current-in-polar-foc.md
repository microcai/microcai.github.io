---
layout: post
title: 极坐标变换中的负电流
tags: [foc, clarke,park,polar]
---

三相电流进行采样后，采集到的电流是有正有负的。因为采集的是相电流，而且相电流是交流电，因此必然会出现有正有负的情况。

相电流经过矢量合成，必然可以表现为在极坐标上的一条向量。

此时，这个向量，只有幅值和角度。

这个幅值，是正数。

我们都知道，电机在运行过程中，会产生反电动势，反电动势高于输入电压的情况下，电机会表现为发电机，对外输出能量。在机械上就是表现为，产生拖拽，也就是俗称电机输出了负扭矩。

在极坐标上看，就是电流的矢量和转子产生了负夹角。

这个负夹角，对控制算法来说，实际上是不利的。

为何这么说呢？

这意味着控制算法不仅仅要考虑电流的大小，还要考虑电流的大小（扭矩大小）还得考虑和转子的夹角是正（定子磁场带着转子走）还是负（转子被定子磁场拖拽）。

因此，在三相电流采样后转电流矢量这个坐标转化算法里，必须同时输入转子角度，然后把负夹角处理为负电流，正夹角。

这样，电流采样模块输出的就是负电流，而负电流，就可以被 电流调节PID模块 正确的处理，产生更高的输出电压来抵消反电动势，以便扭转负电流为正电流。

同时， SVPWM 调制模块，也必须接受 “负电压” 这样的输入，以简化 电流调节PID模块 的控制算法。

所谓负电压，其实就是电压矢量转180度。

经过这样负电流负电压的处理后，正反转控制，就简单的变成了正电流和负电流的控制，同时避免了 “夹角PID模块” 对反转的考虑。 注意，负电流！=发电。只有 电流和电压的乘积为负，才是发电。

反转的时候，电流采集到的是负电流，电流环输出的是负电压。功率一样是正的。夹角一样是正 90度。也就是说，负责调节电流和转子夹角的PID算法，不需要根据正反转决定是正90度还是负90度夹角，统统处理成90度。

